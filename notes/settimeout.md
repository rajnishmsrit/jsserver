It executes after the main thread in unblocked.

That is the reason why React did the algorithm shift in React 18 concurrency model.